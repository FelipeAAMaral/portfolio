
---
import { getCollection } from 'astro:content';
import MainLayout from '../../layouts/MainLayout.astro';

// Generate static paths for all blog posts
export async function getStaticPaths() {
  const blogEntries = await getCollection('blog');
  return blogEntries.map(entry => ({
    params: { slug: entry.slug }, props: { entry },
  }));
}

// Get the blog post content
const { entry } = Astro.props;
const { Content } = await entry.render();
---

<MainLayout title={entry.data.title}>
  <div class="container py-16">
    <div class="max-w-3xl mx-auto">
      <div class="mb-8">
        <a href="/blog" class="text-primary hover:underline mb-4 inline-block">
          &larr; Back to all posts
        </a>
        <h1 class="text-4xl font-bold mb-4">{entry.data.title}</h1>
        <p class="text-muted-foreground">
          Posted on {new Date(entry.data.date).toLocaleDateString()}
        </p>
      </div>
      
      {entry.data.image && (
        <div class="relative w-full aspect-[16/9] mb-8 rounded-lg overflow-hidden">
          <img 
            src={entry.data.image} 
            alt={entry.data.title} 
            class="w-full h-full object-cover"
          />
        </div>
      )}
      
      <article class="prose prose-lg max-w-none">
        <Content />
      </article>
    </div>
  </div>
</MainLayout>
